<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Cart</title>
    <script type="text/javascript" src="common.js"></script>
    <link rel="stylesheet" href="shop.css">
</head>
<body>
<script>addHeader();</script>
<div class="mainDiv">
    <h2>Shopping Cart</h2>
    <div id="fullCartDiv">
        <p>The items you've added to your shopping cart are: </p>
        <table id="cartTable"></table>
    </div>
</div>
<script>
    let tableText = "<tr>" +
        "<th>â„–</th>" +
        "<th></th>" +
        "<th>Product</th>" +
        "<th></th>" +
        "</tr>";
    let keys = Object.keys(localStorage), length = keys.length;
    if (0 === length) {
        document.getElementById("fullCartDiv").innerHTML = "<p> Your cart is empty now. You can visit the <a href='products.html'>Products page</a> and choose some items.";
    } else {
        for (let i = 1; i <= length; ++i) {
            let item = JSON.parse(localStorage.getItem(keys[i - 1]));
            console.log(item);
            tableText += "<tr>" +
                "<td style='width: 5%'>" + i + "</td>" +
                "<td><img style='width: 200px;' src=\"resources/" + item.image + "\" alt =\"" + item.name + "\" width =\"300\"></td>" +
                "<td style='width: 50%'>" + item.name + "</td>" +
                "<td>" + item.value + "</td>" +
                "<td><button onclick='deleteItemFromCart(keys[" + i + "-1])'>Delete</button></td>" +
                "</tr>";
        }
    }
    function deleteItemFromCart(key) {
        localStorage.removeItem(key);
        location.reload();
    }
    document.getElementById("cartTable").innerHTML = tableText;
</script>
<script>addFooter();</script>
</body>
</html>